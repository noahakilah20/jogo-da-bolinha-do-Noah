<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Jogo da Aninha ðŸ’–</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background-color: #111;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    canvas {
      background-color: #222;
      border: 3px solid #f0f;
      border-radius: 10px;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let paddle = {
  x: canvas.width / 2 - 40,
  y: canvas.height - 20,
  width: 80,
  height: 10
};

let balls = [{
  x: canvas.width / 2,
  y: canvas.height - 30,
  radius: 7,
  dx: 3,
  dy: -3
}];

let bricks = [];
let rows = 5;
let cols = 6;
let brickWidth = 60;
let brickHeight = 20;
let score = 0;
let lives = 3;
let gameStarted = false;
let showArrow = true;
let gameOver = false;

function createBricks() {
  bricks = [];
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      bricks.push({
        x: c * (brickWidth + 5) + 20,
        y: r * (brickHeight + 5) + 40,
        width: brickWidth,
        height: brickHeight,
        hits: 0,
        destroyed: false
      });
    }
  }
}

createBricks();

function drawPaddle() {
  ctx.fillStyle = "#0f0";
  ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
}

function drawBall(ball) {
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
  ctx.fillStyle = "#0ff";
  ctx.fill();
  ctx.closePath();
}

function drawBricks() {
  bricks.forEach(brick => {
    if (!brick.destroyed) {
      ctx.fillStyle = ["#f00", "#ff0", "#0ff"][brick.hits % 3];
      ctx.fillRect(brick.x, brick.y, brick.width, brick.height);
    }
  });
}

function drawScore() {
  ctx.fillStyle = "#fff";
  ctx.font = "16px Arial";
  ctx.fillText("Pontos: " + score, 10, 20);
}

function drawLives() {
  ctx.fillStyle = "#fff";
  ctx.font = "16px Arial";
  ctx.fillText("Vidas: " + lives, canvas.width - 80, 20);
}

function drawArrow() {
  if (showArrow) {
    ctx.beginPath();
    ctx.moveTo(paddle.x + paddle.width / 2, paddle.y - 10);
    ctx.lineTo(paddle.x + paddle.width / 2 - 10, paddle.y - 30);
    ctx.lineTo(paddle.x + paddle.width / 2 + 10, paddle.y - 30);
    ctx.closePath();
    ctx.fillStyle = "#fff";
    ctx.fill();
  }
}

function drawGameOver() {
  ctx.fillStyle = "red";
  ctx.font = "30px Arial";
  ctx.fillText("Game Over", 100, canvas.height / 2);
}

function resetGame() {
  balls = [{
    x: canvas.width / 2,
    y: canvas.height - 30,
    radius: 7,
    dx: 3,
    dy: -3
  }];
  lives = 3;
  score = 0;
  gameOver = false;
  createBricks();
}

function updateGame() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPaddle();
  drawBricks();
  drawScore();
  drawLives();
  drawArrow();

  if (gameOver) {
    drawGameOver();
    setTimeout(() => {
      resetGame();
    }, 3000);
    return;
  }

  balls.forEach((ball, index) => {
    if (!gameStarted) {
      ball.x = paddle.x + paddle.width / 2;
      ball.y = paddle.y - ball.radius;
      return;
    }

    ball.x += ball.dx;
    ball.y += ball.dy;

    if (ball.x < ball.radius || ball.x > canvas.width - ball.radius) ball.dx *= -1;
    if (ball.y < ball.radius) ball.dy *= -1;

    if (ball.y > canvas.height) {
      balls.splice(index, 1);
      if (balls.length === 0) {
        lives--;
        gameStarted = false;
        showArrow = true;
        if (lives <= 0) {
          gameOver = true;
        } else {
          balls.push({
            x: canvas.width / 2,
            y: canvas.height - 30,
            radius: 7,
            dx: 3,
            dy: -3
          });
        }
      }
    }

    // ColisÃ£o com paddle
    if (
      ball.y + ball.radius > paddle.y &&
      ball.x > paddle.x && ball.x < paddle.x + paddle.width
    ) {
      ball.dy *= -1;
    }

    // ColisÃ£o com tijolos
    bricks.forEach(brick => {
      if (!brick.destroyed &&
          ball.x > brick.x && ball.x < brick.x + brick.width &&
          ball.y > brick.y && ball.y < brick.y + brick.height
      ) {
        ball.dy *= -1;
        brick.hits++;

        // +5 pontos por hit
        score += 5;

        if (brick.hits === 3) {
          brick.destroyed = true;
          score += 15; // bÃ´nus
          balls.push({
            x: ball.x,
            y: ball.y,
            radius: ball.radius,
            dx: -ball.dx,
            dy: ball.dy
          });
        }
      }
    });

    drawBall(ball);
  });

  requestAnimationFrame(updateGame);
}

document.addEventListener("mousemove", e => {
  let rect = canvas.getBoundingClientRect();
  let mouseX = e.clientX - rect.left;
  paddle.x = mouseX - paddle.width / 2;
});

document.addEventListener("touchmove", e => {
  let touch = e.touches[0];
  let rect = canvas.getBoundingClientRect();
  let touchX = touch.clientX - rect.left;
  paddle.x = touchX - paddle.width / 2;
});

document.addEventListener("click", () => {
  if (!gameStarted && !gameOver) {
    gameStarted = true;
    showArrow = false;
  }
});

document.addEventListener("touchstart", () => {
  if (!gameStarted && !gameOver) {
    gameStarted = true;
    showArrow = false;
  }
});

updateGame();
</script>
</body>
</html>
